namespace.tendrl.ceph_integration:
  objects:
    Tendrl_context:
      enabled: True
      attrs:
        cluster_id:
          type: String
          help: "Tendrl managed/generated cluster id for the sds being managed by Tendrl"
        sds_name:
          type: String
          help: "gluster|ceph"
        sds_version:
          type: String
          help: "Sds version eg: 1.2.3"
      value: "clusters/$Tendrl_context.cluster_id/Tendrl_context/"
    Pool:
      enabled: True
      value: /clusters/$cluster.id/pools/$pool.id
      attrs:
        poolname:
          type: String
          help: "Name of the Ceph pool"
        pooltype:
          type: String
          help: "Type of the Ceph pool(ec or replicated)"
        replica_count:
          type: Integer
          help: "Replica count of volume"
        pg_num:
          type: Integer
          help: "The total number of placement groups for placement purposes."
        pgp_num:
          type: Integer
          help: "The total number of placement groups for the pool."
        crush_ruleset:
          type: Integer
          help: "The ID of a CRUSH ruleset to use for this pool. The specified ruleset must exist."
        ec_profile:
          type: String
          help: "For erasure pools only.It must be an existing profile "
        max_objects:
          type: Integer
          help: "quota for maximum number of objects. To remove quota set the value to zero"
        max_bytes:
          type: Integer
          help: "quota for maximum number of bytes. To remove quota set the value to zero"
        min_size:
          help: "sets the number of replicas for objects in the pool"
          type: Integer
        size:
          help: "Sets the minimum number of replicas required for I/O"
          type: Integer
    atoms:
        create:
          enabled: True
          inputs:
            mandatory:
              - Pool.poolname
              - Pool.pooltype
              - Pool.replica_count
              - Pool.pg_num
              - Pool.pgp_num
              - Pool.crush_ruleset
            optional:
              - Pool.max_objects
              - Pool.max_bytes
              - Pool.ec_profile
          name: "Create Pool"
          run: tendrl.ceph_integration.objects.config.atoms.create_pool
          type: Create
          uuid: bd0155a8-ff15-42ff-9c76-5176f53c13e0
        delete:
          enabled: True
          inputs:
            mandatory:
              - Pool.poolname
          name: "Delete Pool"
          run: tendrl.ceph_integration.objects.config.atoms.delete_pool
          type: Delete
          uuid: 9a2df258-9b24-4fd3-a66f-ee346e2e3720
    flows:
      CreatePool:
        atoms:
          - tendrl.ceph_integration.objects.pool.atoms.create
        description: "Create Ceph Pool"
        enabled: True
        inputs:
            mandatory:
              - Pool.poolname
              - Pool.pg_num
              - Pool.min_size
              - Tendrl_context.sds_name
              - Tendrl_context.sds_version
              - Tendrl_context.cluster_id
        run: tendrl.ceph_integration.flows.flow
        type: Create
        uuid: faeab231-69e9-4c9d-b5ef-a67ed057f98b
        version: 1
      DeletePool:
        atoms:
          - tendrl.ceph_integration.objects.config.atoms.delete_pool
        description: "Delete Ceph Pool"
        enabled: True
        inputs:
          mandatory:
            - Pool.poolname
            - tendrl.node_agent.Tendrl_context.sds_name
            - tendrl.node_agent.Tendrl_context.sds_version
            - tendrl.node_agent.Tendrl_context.cluster_id
        run: tendrl.ceph_integration.flows.delete_pool.DeletePool
        type: Delete
        uuid: 4ac41d8f-a0cf-420a-b2fe-18761e07f3b9
        version: 1
tendrl_schema_version: 0.3